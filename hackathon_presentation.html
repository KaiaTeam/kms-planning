<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="./favicon.png" sizes="32x32" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dongmin's Happy Home</title>
    <link href="https://db.onlinewebfonts.com/c/ee67acc5493a40eafc52a0b98e340340                                                                                                                                                             ?family=Un+Dotum" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body,
        .welcome-section h1,
        .welcome-section p,
        .group-box .legend,
        h1, p {
            font-family: "Un Dotum", "Dotum", 'Tahoma', 'MS Sans Serif', 'Segoe                                                                                                                                                              UI', Arial, sans-serif !important;
        }

        body {
            font-size: 16px;
            background: url('./jcaq7gsamypc1.png') center center / cover no-repe                                                                                                                                                             at fixed;
            background-color: #87CEEB;
            overflow-x: auto;
            min-height: 100vh;
            padding: 20px;
        }

        .window {
            position: absolute;
            top: 50%;
            left: 45%;
            transform: translate(-50%, -50%);
            font-family: 'Tahoma', 'MS Sans Serif', 'Segoe UI', Arial, sans-seri                                                                                                                                                             f;
            background: #ECE9D8;
            border: 1px outset #C0C0C0;
            width: 70vw;
            height: 90vh;
            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.3);
        }

        .title-bar {
            background: linear-gradient(to bottom, #0A5EA8 0%, #1084CE 3%, #1487                                                                                                                                                             D2 8%, #2090E4 100%);
            padding: 3px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #828282;
        }

        .title-bar-text {
            font-family: 'Tahoma', 'MS Sans Serif', 'Segoe UI', Arial, sans-seri                                                                                                                                                             f;
            color: white;
            font-weight: bold;
            font-size: 13px;
            margin-left: 8px;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
        }

        .title-bar-controls {
            display: flex;
            gap: 2px;
            margin-right: 2px;
        }

        .title-bar-controls button {
            width: 16px;
            height: 14px;
            background: #C0C0C0;
            border: 1px outset #C0C0C0;
            font-size: 9px;
            line-height: 1;
            cursor: pointer;
        }

        .title-bar-controls button:hover {
            background: #E0E0E0;
        }

        .title-bar-controls button:active {
            border: 1px inset #C0C0C0;
        }

        .menubar {
            font-family: 'Tahoma', 'MS Sans Serif', 'Segoe UI', Arial, sans-seri                                                                                                                                                             f;
            background: #ECE9D8;
            border-bottom: 1px solid #919B9C;
            padding: 4px 8px;
            list-style: none;
            display: flex;
            font-size: 13px;
        }

        .menubar li {
            position: relative;
            padding: 6px 12px;
            cursor: pointer;
            border: 1px solid transparent;
        }

        .menubar li:hover {
            background: #B6BDD2;
            border-color: #0A246A;
        }

        .menubar .submenu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: #ECE9D8;
            border: 1px outset #C0C0C0;
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            z-index: 100;
            min-width: 120px;
        }

        .menubar li:hover .submenu {
            display: block;
        }

        .submenu li {
            display: block;
            padding: 4px 12px;
            border: none;
            background: none;
        }

        .submenu li:hover {
            background: #0A246A;
            color: white;
        }

        /* Window Body */
        .window-body {
            padding: 20px;
            background: #ECE9D8;
            /* min-height set dynamically on load */
            height: calc(100% - 100px);
            overflow-y: auto;
        }

        /* Content Sections */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .content-section h2 {
            font-family: 'Tahoma', 'MS Sans Serif', 'Segoe UI', Arial, sans-seri                                                                                                                                                             f;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #000080;
        }

        .content-section p {
            line-height: 1.5;
            margin-bottom: 12px;
        }

        /* Buttons */
        .btn {
            background: #C0C0C0;
            border: 1px outset #C0C0C0;
            padding: 6px 16px;
            font-size: 13px;
            cursor: pointer;
            margin: 3px;
        }

        .btn:hover {
            background: #E0E0E0;
        }

        .btn:active {
            border: 1px inset #C0C0C0;
        }

        .btn.active {
            background: #B6BDD2;
            border: 1px inset #C0C0C0;
        }

        /* Frames/Groups */
        .group-box {
            border: 2px groove #C0C0C0;
            padding: 15px;
            margin: 15px 0;
            position: relative;
        }

        .group-box .legend {
            font-family: 'Tahoma', 'MS Sans Serif', 'Segoe UI', Arial, sans-seri                                                                                                                                                             f;
            position: absolute;
            top: -10px;
            left: 15px;
            background: #ECE9D8;
            padding: 0 8px;
            font-weight: bold;
            font-size: 13px;
        }

        /* Input fields */
        .input-field {
            border: 2px inset #C0C0C0;
            padding: 5px;
            font-size: 13px;
            background: white;
            width: 100%;
            margin: 5px 0;
        }

        /* List boxes */
        .list-box {
            border: 2px inset #C0C0C0;
            background: white;
            padding: 10px;
            min-height: 120px;
            margin: 8px 0;
        }

        /* Status bar */
        .status-bar {
            background: #ECE9D8;
            border-top: 1px solid #919B9C;
            padding: 5px 8px;
            font-size: 13px;
            display: flex;
            justify-content: space-between;
        }

        .status-section {
            border: 1px inset #C0C0C0;
            padding: 3px 8px;
            margin-right: 8px;
        }

        /* Welcome section */
        .welcome-section {
            text-align: center;
            margin: 25px 0;
        }

        .welcome-section h1 {
            font-size: 22px;
            color: #000080;
            margin-bottom: 15px;
        }

        /* Feature grid */
        .feature-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .feature-item h3,
        .feature-item p,
        .feature-item,
        .group-box p {
            font-family: "Un Dotum", "Dotum", 'Tahoma', 'MS Sans Serif', 'Segoe                                                                                                                                                              UI', Arial, sans-serif !important;
        }

        .feature-item {
            flex: 1;
            min-width: 150px;
            border: 2px groove #C0C0C0;
            padding: 10px;
            text-align: center;
            background: #F0F0F0;
        }

        .feature-item h3 {
            font-size: 14px;
            color: #000080;
            margin-bottom: 8px;
        }

        /* Diary form */
        .diary-access {
            max-width: 300px;
            margin: 20px auto;
        }

        .diary-access .group-box {
            text-align: center;
        }

        /* Gallery placeholder */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .gallery-item {
            aspect-ratio: 1;
            background: #F0F0F0;
            border: 2px inset #C0C0C0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #666;
        }

        /* About section */
        .about-grid {
            display: flex;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .about-item {
            flex: 1;
            min-width: 200px;
        }

        /* Scrollbars */
        .scrollable {
            max-height: 200px;
            overflow-y: auto;
            border: 2px inset #C0C0C0;
            background: white;
            padding: 5px;
        }

        /* Audio Player */
        .audio-player {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #ECE9D8;
            border: 2px outset #C0C0C0;
            padding: 8px;
            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            min-width: 300px;
        }

        .audio-player .player-title {
            background: linear-gradient(to bottom, #0A5EA8 0%, #1084CE 3%, #1487                                                                                                                                                             D2 8%, #2090E4 100%);
            color: white;
            padding: 2px 6px;
            font-size: 11px;
            font-weight: bold;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
            margin: -8px -8px 8px -8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .audio-player .minimize-btn {
            background: #C0C0C0;
            border: 1px outset #C0C0C0;
            width: 14px;
            height: 12px;
            font-size: 8px;
            cursor: pointer;
        }

        .audio-controls {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 5px;
        }

        .control-btn {
            background: #C0C0C0;
            border: 1px outset #C0C0C0;
            width: 24px;
            height: 20px;
            font-size: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: #E0E0E0;
        }

        .control-btn:active {
            border: 1px inset #C0C0C0;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 3px;
            font-size: 10px;
        }

        .progress-container {
            background: #C0C0C0;
            border: 1px inset #C0C0C0;
            height: 16px;
            margin: 5px 0;
            position: relative;
            cursor: pointer;
        }

        .progress-bar {
            background: linear-gradient(to bottom, #0A5EA8, #1084CE);
            height: 100%;
            width: 0%;
            transition: width 0.1s ease;
        }

        .progress-time {
            position: absolute;
            top: 1px;
            left: 3px;
            font-size: 9px;
            color: white;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.8);
            pointer-events: none;
        }

        .track-info {
            font-size: 10px;
            color: #000080;
            margin-bottom: 3px;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .volume-slider {
            width: 60px;
            height: 3px;
            background: #C0C0C0;
            border: 1px inset #C0C0C0;
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: #808080;
            border: 1px outset #C0C0C0;
            cursor: pointer;
        }

        .audio-player.minimized {
            transform: translateY(calc(100% - 25px));
            transition: transform 0.3s ease;
        }

        .audio-player.minimized .audio-controls,
        .audio-player.minimized .progress-container,
        .audio-player.minimized .track-info,
        .audio-player.minimized .volume-control {
            display: none;
        }

        /* Icons */
        .icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            background-size: contain;
            vertical-align: middle;
            margin-right: 5px;
        }

        .icon-home {
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/20                                                                                                                                                             00/svg" viewBox="0 0 16 16"><path d="M8 1l7 7h-2v7H3V8H1l7-7z" fill="%23000080"/                                                                                                                                                             ></svg>');
        }

        .icon-diary {
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/20                                                                                                                                                             00/svg" viewBox="0 0 16 16"><rect x="3" y="2" width="10" height="12" fill="%2380                                                                                                                                                             0000" stroke="%23000"/><line x1="5" y1="5" x2="11" y2="5" stroke="%23000"/><line                                                                                                                                                              x1="5" y1="7" x2="11" y2="7" stroke="%23000"/><line x1="5" y1="9" x2="9" y2="9"                                                                                                                                                              stroke="%23000"/></svg>');
        }

        .icon-gallery {
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/20                                                                                                                                                             00/svg" viewBox="0 0 16 16"><rect x="2" y="3" width="12" height="9" fill="%23008                                                                                                                                                             000" stroke="%23000"/><circle cx="5" cy="6" r="1" fill="%23FFD700"/><path d="M4                                                                                                                                                              10l3-2 2 1 3-2v3H4v-1z" fill="%23654321"/></svg>');
        }

        .icon-info {
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/20                                                                                                                                                             00/svg" viewBox="0 0 16 16"><circle cx="8" cy="8" r="7" fill="%23000080" stroke=                                                                                                                                                             "%23000"/><text x="8" y="12" text-anchor="middle" fill="white" font-size="10">i<                                                                                                                                                             /text></svg>');
        }

        .icon-guestbook {
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/20                                                                                                                                                             00/svg" viewBox="0 0 16 16"><rect x="2" y="3" width="12" height="10" fill="%234B                                                                                                                                                             0082" stroke="%23000"/><line x1="4" y1="6" x2="12" y2="6" stroke="%23FFF"/><line                                                                                                                                                              x1="4" y1="8" x2="10" y2="8" stroke="%23FFF"/><line x1="4" y1="10" x2="11" y2="                                                                                                                                                             10" stroke="%23FFF"/></svg>');
        }

        /* Guestbook Styles */
        .guestbook-form {
            margin: 20px 0;
        }

        .guestbook-form input,
        .guestbook-form textarea {
            width: 100%;
            margin: 8px 0;
        }

        .guestbook-form textarea {
            min-height: 100px;
            resize: vertical;
            font-family: "Un Dotum", "Dotum", 'Tahoma', 'MS Sans Serif', 'Segoe                                                                                                                                                              UI', Arial, sans-serif;
        }

        .guestbook-entry {
            background: #F0F0F0;
            border: 1px solid #C0C0C0;
            padding: 12px;
            margin: 10px 0;
        }

        .guestbook-entry-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding-bottom: 5px;
            border-bottom: 1px solid #C0C0C0;
        }

        .guestbook-title {
            font-weight: bold;
            color: #000080;
        }

        .guestbook-date {
            color: #666;
            font-size: 11px;
        }

        .guestbook-content {
            white-space: pre-wrap;
            word-wrap: break-word;
            line-height: 1.5;
        }

        .guestbook-locked {
            background: #F5F5F5;
            border: 1px dashed #999;
            padding: 20px;
            text-align: center;
            color: #666;
            font-style: italic;
        }

        .guestbook-password-form {
            display: inline-block;
            margin-top: 10px;
        }

        .guestbook-password-form input {
            width: 150px;
            margin-right: 5px;
        }

        .guestbook-unlock-btn {
            padding: 4px 10px;
            font-size: 11px;
        }

        .guestbook-lock-icon {
            font-size: 20px;
            margin-bottom: 10px;
            display: block;
        }

        .guestbook-list {
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
        }

        .guestbook-empty {
            text-align: center;
            color: #666;
            padding: 30px;
            font-style: italic;
        }

        .guestbook-pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            gap: 5px;
        }

        .pagination-btn {
            background: #C0C0C0;
            border: 1px outset #C0C0C0;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            min-width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pagination-btn:hover {
            background: #E0E0E0;
        }

        .pagination-btn:active {
            border: 1px inset #C0C0C0;
        }

        .pagination-btn.current {
            background: #B6BDD2;
            border: 1px inset #C0C0C0;
            font-weight: bold;
        }

        .pagination-btn:disabled {
            background: #F0F0F0;
            color: #999;
            cursor: not-allowed;
            border: 1px inset #C0C0C0;
        }

        .pagination-info {
            font-size: 11px;
            color: #666;
            margin: 0 10px;
            white-space: nowrap;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .window {
                margin: 10px;
            }

            .feature-grid {
                flex-direction: column;
            }

            .about-grid {
                flex-direction: column;
            }
        }

        /* Notification animation */
        @keyframes bounce {
            0%, 20%, 60%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            40% {
                transform: translateX(-50%) translateY(-10px);
            }
            80% {
                transform: translateX(-50%) translateY(-5px);
            }
        }
    </style>
</head>
<body>
<div class="window">
    <div class="title-bar">
        <div class="title-bar-text">dongmin-happy-home.exe</div>
        <div class="title-bar-controls">
            <button title="최소화">_</button>
            <button title="최대화">□</button>
            <button title="닫기">×</button>
        </div>
    </div>

    <ul class="menubar">
        <li>파일
            <ul class="submenu">
                <li onclick="showSection('home')">홈으로 이동</li>
                <li>아무것도 없어요</li>
                <li>---</li>
                <li>키키키</li>
            </ul>
        </li>
        <li>편집
            <ul class="submenu">
                <li>당신의</li>
                <li>이야기도</li>
                <li>너무 궁금해요</li>
            </ul>
        </li>
        <li>보기
            <ul class="submenu">
                <li>이것저것</li>
                <li>보고싶어요</li>
            </ul>
        </li>
        <li>도움말
            <ul class="submenu">
                <li>도움이 필요하면</li>
                <li>연락 주세요</li>
            </ul>
        </li>
    </ul>

    <div class="window-body">
        <!-- Navigation Buttons -->
        <div style="margin-bottom: 20px; border-bottom: 1px solid #919B9C; paddi                                                                                                                                                             ng-bottom: 15px;">
            <button class="btn active" onclick="showSection('home')">
                <span class="icon icon-home"></span>홈
            </button>
            <button class="btn" onclick="showSection('diary')">
                <span class="icon icon-diary"></span>일기장
            </button>
            <button class="btn" onclick="showSection('gallery')" style="display:                                                                                                                                                              none">
                <span class="icon icon-gallery"></span>갤러리
            </button>
            <button class="btn" onclick="showSection('introduce')">
                <span class="icon icon-info"></span>소개
            </button>
            <button class="btn" onclick="showSection('guestbook')">
                <span class="icon icon-guestbook"></span>방명록
            </button>
        </div>

        <!-- Home Section -->
        <div id="home" class="content-section active">
            <div class="welcome-section">
                <h1>🏠 천동민의 행복한 홈 🌟</h1>
                <p>인터넷 상의 제 작은 개인공간에 오신 것을 환영합니다!</p>
            </div>

            <div class="group-box">
                <div class="legend">사이트 소개</div>
                <p>안녕하세요! 이곳은 제 개인 홈페이지입니다.</p>
                <p>천천히 둘러보시고 즐거운 시간 되세요! 🐸</p>
            </div>

            <div class="group-box">
                <div class="legend">주요 메뉴</div>
                <div class="feature-grid">
                    <div class="feature-item">
                        <h3>📔 일기장</h3>
                        <p>비밀번호로 보호되는 개인적인 공간</p>
                    </div>
                    <div class="feature-item">
                        <h3>👋 자기소개</h3>
                        <p>저에 대해 알아보세요</p>
                    </div>
                    <div class="feature-item">
                        <h3>📝 방명록</h3>
                        <p>방문자들이 남긴 메시지</p>
                    </div>
                </div>
            </div>

            <div class="group-box">
                <div class="legend">최근 업데이트</div>
                <div class="list-box">
                    <p>• 2025.08.04 - 홈페이지 개설</p>
                    <p>• 2025.08.05 - 배경음악 추가 (Copyright Free!!)</p>
                    <p>• 2025.08.24 - 방명록 기능 추가</p>
                </div>
            </div>
        </div>

        <!-- Diary Section -->
        <div id="diary" class="content-section">
            <h2>📔 개인 일기장</h2>

            <div class="diary-access">
                <div class="group-box">
                    <div class="legend">🔐 접근 제한</div>
                    <p>이 영역은 비밀번호로 보호됩니다.</p>
                    <br>
                    <label for="diaryPassword">비밀번호:</label>
                    <input type="password" id="diaryPassword" class="input-field                                                                                                                                                             " placeholder="패스워드를 입력하세요">
                    <br><br>
                    <button class="btn" onclick="checkDiaryPassword()">로그인</b                                                                                                                                                             utton>
                </div>
            </div>

            <div class="group-box">
                <div class="legend">일기 미리보기</div>
                <div class="scrollable">
                    <p style="color: #666; font-style: italic;">
                        비밀번호를 입력하시면 개인 일기를 열람할 수 있습니다.<br                                                                                                                                                             >
                        여기에는 일상의 소소한 이야기들과 개인적인 생각들이 담겨                                                                                                                                                             있습니다.<br><br>
                    </p>
                </div>
            </div>
        </div>

        <!-- Gallery Section -->
        <div id="gallery" class="content-section">
            <h2>🖼️ 사진 갤러리</h2>

            <div class="group-box">
                <div class="legend">앨범 목록</div>
                <div class="list-box">
                    <p>📁 (준비중...)</p>
                    <p>📁 (준비중...)</p>
                    <p>📁 (준비중...)</p>
                    <p>📁 (준비중...)</p>
                </div>
            </div>

            <div class="group-box">
                <div class="legend">미리보기</div>
                <div class="gallery-grid">
                    <div class="gallery-item">이미지 1<br>준비중</div>
                    <div class="gallery-item">이미지 2<br>준비중</div>
                    <div class="gallery-item">이미지 3<br>준비중</div>
                    <div class="gallery-item">이미지 4<br>준비중</div>
                    <div class="gallery-item">이미지 5<br>준비중</div>
                    <div class="gallery-item">이미지 6<br>준비중</div>
                </div>
            </div>

            <p style="text-align: center; color: #666; font-style: italic;">
                곧 아름다운 사진들로 채워질 예정입니다! 📸
            </p>
        </div>

        <!-- Introduce Section -->
        <div id="introduce" class="content-section">
            <h2>소개</h2>

            <div class="about-grid">
                <div class="about-item">
                    <div class="group-box">
                        <div class="legend">기본 정보</div>
                        <p><strong>이름:</strong> 천동민</p>
                        <p><strong>현재:</strong> 설로인에서 커머스 & 풀필먼트                                                                                                                                                              시스템(OMS/WMS) 을 개발하고 있어요</p>
                        <p><strong>이전에는:</strong> 국내 OTT 회사들의 실시간                                                                                                                                                              스트리밍 서비스 및 모니터링/광고 시스템, 스터디카페 관리 시스템 등을 만들었어요<                                                                                                                                                             /p>
                        <p><strong>좋아하는 것:</strong> 이것저것 개발, 게임, 런                                                                                                                                                             닝</p>
                    </div>
                </div>

                <div class="about-item">
                    <div class="group-box">
                        <div class="legend">관심사</div>
                        <div class="scrollable">
                            <p>💻 <strong>개발</strong><br>
                                웹 말고도 이것저것 개발해서 만드는걸 좋아합니다.                                                                                                                                                             </p>

                            <p>🎮 <strong>게임</strong><br>
                                다양한 장르의 이런저런 게임들을 좋아해요.</p>

                            <p>🏃 <strong>런닝</strong><br>
                                아무 생각 없이 밤에 뛰는걸 좋아해요.</p>

                            <p>🐸 <strong>다른 사람들</strong><br>
                                다른 사람들에게 관심이 많은 것 같아요 </p>
                            <p>여길 어떻게 찾아온거지? 🤔</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="group-box">
                <div class="legend">이 사이트에 대해</div>
                <p>이 홈페이지는 <strong>제가 개인적으로 편안함을 느끼는</strong                                                                                                                                                             > 스타일과 감성으로 만들었습니다.</p>
                <p>제 개인 사이트니깐요 히히</p>
                <p>편하게 연락 부탁드려요.</p>
                <br>
                <p style="color: #000080; font-weight: bold;">
                    방문해주셔서 감사합니다!
                </p>
            </div>

            <div class="group-box">
                <div class="legend">연락처</div>
                <p>📧 이메일: aehdals9900@gmail.com</p>
                <p>📧 telegram: @ZizonDongmin</p>
            </div>
        </div>

        <!-- Guestbook Section -->
        <div id="guestbook" class="content-section">
            <h2>📝 방명록</h2>

            <div class="group-box">
                <div class="legend">방명록 작성</div>
                <div class="guestbook-form">
                    <label for="guestbookName">작성자:</label>
                    <input type="text" id="guestbookName" class="input-field" pl                                                                                                                                                             aceholder="이름을 입력하세요" maxlength="50">

                    <label for="guestbookTitle">제목:</label>
                    <input type="text" id="guestbookTitle" class="input-field" p                                                                                                                                                             laceholder="제목을 입력하세요" maxlength="100">

                    <label for="guestbookContent">내용:</label>
                    <textarea id="guestbookContent" class="input-field" placehol                                                                                                                                                             der="내용을 입력하세요"
                              maxlength="1000"></textarea>

                    <label for="guestbookPassword">비밀번호 (내용 보호):</label>
                    <input type="password" id="guestbookPassword" class="input-f                                                                                                                                                             ield" placeholder="비밀번호를 설정하면 비밀글이 됩니다">
                    <p style="font-size: 11px; color: #666; margin: 5px 0;">※ 비                                                                                                                                                             밀번호를 설정하면 비밀번호를 아는 사람만 내용을 볼 수 있습니다.</p>

                    <div style="text-align: center; margin-top: 15px;">
                        <button class="btn" onclick="submitGuestbook()">✍️ 작성하                                                                                                                                                             기</button>
                        <button class="btn" onclick="clearGuestbookForm()">🔄 초                                                                                                                                                             기화</button>
                    </div>
                </div>
            </div>

            <div class="group-box">
                <div class="legend">방명록 목록</div>
                <div class="guestbook-list" id="guestbookList">
                    <div class="guestbook-empty">방명록을 불러오는 중...</div>
                </div>
                <div class="guestbook-pagination" id="guestbookPagination" style                                                                                                                                                             ="display: none;">
                    <!-- Pagination controls will be inserted here -->
                </div>
            </div>
        </div>
    </div>

    <div class="status-bar">
        <div class="status-section">안녕!!</div>
        <div class="status-section" id="current-time"></div>
        <div class="status-section">dongmin-home v1.0</div>
    </div>
</div>

<!-- Audio Player -->
<div class="audio-player" id="audioPlayer">
    <div class="player-title">
        <span>🎵 Music Player</span>
        <button class="minimize-btn" onclick="togglePlayer()" title="최소화">_</                                                                                                                                                             button>
    </div>

    <div class="track-info" id="trackInfo">♪ Glossy City - imataco</div>

    <div class="progress-container" onclick="seekAudio(event)">
        <div class="progress-bar" id="progressBar"></div>
        <div class="progress-time" id="progressTime">00:00 / 00:00</div>
    </div>

    <div class="audio-controls">
        <button class="control-btn" onclick="prevTrack()" title="이전">⏮</button                                                                                                                                                             >
        <button class="control-btn" onclick="togglePlay()" id="playBtn" title="                                                                                                                                                             재생/일시정지">▶</button>
        <button class="control-btn" onclick="nextTrack()" title="다음">⏭</button                                                                                                                                                             >
        <button class="control-btn" onclick="stopAudio()" title="정지">⏹</button                                                                                                                                                             >
    </div>

    <div class="volume-control">
        <span>🔊</span>
        <input type="range" class="volume-slider" id="volumeSlider" min="0" max=                                                                                                                                                             "100" value="70"
               onchange="setVolume(this.value)">
        <span id="volumeDisplay">70%</span>
    </div>
</div>

<audio id="bgAudio" preload="auto">
    <!-- 소스는 JavaScript에서 동적으로 설정됩니다 -->
</audio>

<script>
    // Prevent shrink: set initial min-height
    document.addEventListener('DOMContentLoaded', function () {
        const bodyEl = document.querySelector('.window-body');
        const initialHeight = bodyEl.offsetHeight;
        bodyEl.style.minHeight = initialHeight + 'px';
    });

    function showSection(sectionName) {
        // Hide all sections
        const sections = document.querySelectorAll('.content-section');
        sections.forEach(section => {
            section.classList.remove('active');
        });

        // Remove active class from all buttons
        const buttons = document.querySelectorAll('.btn');
        buttons.forEach(button => {
            button.classList.remove('active');
        });

        // Show selected section
        document.getElementById(sectionName).classList.add('active');

        // Add active class to clicked button
        event.target.closest('.btn').classList.add('active');
    }

    async function checkDiaryPassword() {
        const password = document.getElementById('diaryPassword').value;
        document.getElementById('diaryPassword').value = '';

        if (password === '') {
            alert('비밀번호를 입력해주세요!');
            return;
        }

        try {
            const response = await fetch('https://dongmin.monster/api/access', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({password: password})
            });

            const data = await response.json();

            if (data.success) {
                location.href = `${data.pageName}.html`;
            } else {
                alert('❌ 비밀번호가 틀렸습니다.\n다시 시도해주세요.');
            }
        } catch (error) {
            console.error('API 호출 오류:', error);
            alert('❌ 서버 연결 오류가 발생했습니다.\n잠시 후 다시 시도해주세요.                                                                                                                                                             ');
        }
    }

    // Enter key support for password
    document.getElementById('diaryPassword').addEventListener('keypress', functi                                                                                                                                                             on (e) {
        if (e.key === 'Enter') {
            checkDiaryPassword();
        }
    });

    // Update time in status bar
    function updateTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('ko-KR');
        document.getElementById('current-time').textContent = timeString;
    }

    updateTime();
    setInterval(updateTime, 1000);

    // Add Windows XP sound effects (optional)
    function playClickSound() {
    }

    // Add click sound to buttons
    document.querySelectorAll('.btn').forEach(button => {
        button.addEventListener('click', playClickSound);
    });

    // Audio Player Functions
    const audio = document.getElementById('bgAudio');
    const playBtn = document.getElementById('playBtn');
    const progressBar = document.getElementById('progressBar');
    const progressTime = document.getElementById('progressTime');
    const volumeSlider = document.getElementById('volumeSlider');
    const volumeDisplay = document.getElementById('volumeDisplay');
    const trackInfo = document.getElementById('trackInfo');

    let isPlaying = false;
    let isPlayerMinimized = false;

    // 플레이리스트 정의
    const playlist = [
        {file: './689417__imataco__glossy-city.wav', title: 'Glossy City', artis                                                                                                                                                             t: 'imataco'},
        {file: './698560__imataco__underground.wav', title: 'Underground', artis                                                                                                                                                             t: 'imataco'},
        {file: './698562__imataco__chill.wav', title: 'Chill', artist: 'imataco'                                                                                                                                                             },
        {file: './624740__imataco__beat-1.m4a', title: 'Beat 1', artist: 'imatac                                                                                                                                                             o'},
        {file: './690701__imataco__what-do-i-call-this.wav', title: 'What Do I C                                                                                                                                                             all This', artist: 'imataco'},
        {file: './Komm, süsser Tod.mp3', title:'Komm, süsser Tod', artist: 'Anno                                                                                                                                                              Hideaki' }
    ];

    let currentTrackIndex = 0;
    let shuffledPlaylist = [];

    // 플레이리스트 셔플 함수
    function shufflePlaylist() {
        shuffledPlaylist = [...Array(playlist.length).keys()];
        for (let i = shuffledPlaylist.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffledPlaylist[i], shuffledPlaylist[j]] = [shuffledPlaylist[j], s                                                                                                                                                             huffledPlaylist[i]];
        }
        currentTrackIndex = 0;
        console.log('🔀 플레이리스트가 랜덤으로 섞였습니다!');
        loadCurrentTrack();
    }

    // 현재 트랙 로드
    function loadCurrentTrack() {
        const track = playlist[shuffledPlaylist[currentTrackIndex]];
        audio.src = track.file;
        trackInfo.textContent = `♪ ${track.title} - ${track.artist}`;

        // 트랙 로드 후 자동 재생 시도
        audio.addEventListener('canplaythrough', function () {
            if (isPlaying) {
                audio.play().catch(() => {
                });
            }
        }, {once: true});
    }

    // Initialize audio
    audio.volume = 0.7;

    // 시작시 플레이리스트 셔플
    shufflePlaylist();

    // 즉시 재생 시도 (여러 방법으로)
    function attemptAutoplay() {
        // 방법 1: 직접 재생 시도
        audio.play().then(() => {
            playBtn.textContent = '⏸';
            isPlaying = true;
            console.log('🎵 음악이 자동재생됩니다!');
        }).catch(() => {
            console.log('🔇 브라우저 정책으로 자동재생이 차단되었습니다.');
            // 사용자에게 재생 버튼 클릭 안내
            showPlayNotification();
        });
    }

    let notificationShown = false;

    // 재생 안내 알림
    function showPlayNotification() {
        if (notificationShown) return;
        notificationShown = true;
        const notification = document.createElement('div');
        notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: #FFE4B5;
                border: 2px outset #C0C0C0;
                padding: 10px 20px;
                z-index: 9999;
                font-size: 13px;
                box-shadow: 4px 4px 8px rgba(0,0,0,0.3);
                animation: bounce 0.5s ease-in-out;
            `;
        notification.innerHTML = '🎵 음악을 들으려면 재생 버튼(▶)을 클릭하세요!                                                                                                                                                              🎵';
        document.body.appendChild(notification);

        // 5초 후 자동 제거
        setTimeout(() => {
            if (notification.parentNode) {
                notification.style.opacity = '0';
                notification.style.transition = 'opacity 0.5s';
                setTimeout(() => notification.remove(), 500);
            }
        }, 5000);
    }

    // 페이지 로드 즉시 재생 시도
    window.addEventListener('load', () => {
        setTimeout(attemptAutoplay, 100);
    });

    // 페이지 로드되자마자도 시도
    attemptAutoplay();

    // 사용자의 첫 상호작용 감지 (클릭, 키보드, 마우스 움직임 등)
    ['click', 'keydown', 'mousemove', 'touchstart'].forEach(event => {
        document.addEventListener(event, function () {
            if (!isPlaying) {
                attemptAutoplay();
            }
        }, {once: true});
    });

    function togglePlay() {
        if (isPlaying) {
            audio.pause();
            playBtn.textContent = '▶';
            isPlaying = false;
        } else {
            audio.play().then(() => {
                playBtn.textContent = '⏸';
                isPlaying = true;
            }).catch(e => {
                console.log('Audio play failed:', e);
            });
        }
    }

    function stopAudio() {
        audio.pause();
        audio.currentTime = 0;
        playBtn.textContent = '▶';
        isPlaying = false;
        updateProgress();
    }

    function prevTrack() {
        currentTrackIndex = (currentTrackIndex - 1 + shuffledPlaylist.length) %                                                                                                                                                              shuffledPlaylist.length;
        loadCurrentTrack();
        if (isPlaying) {
            audio.play().catch(() => {
            });
        }
    }

    function nextTrack() {
        currentTrackIndex = (currentTrackIndex + 1) % shuffledPlaylist.length;
        loadCurrentTrack();
        isPlaying = true;
        audio.play().catch(() => {
        });
    }

    function setVolume(value) {
        audio.volume = value / 100;
        volumeDisplay.textContent = value + '%';
    }

    function seekAudio(event) {
        const progressContainer = event.currentTarget;
        const clickX = event.offsetX;
        const width = progressContainer.offsetWidth;
        const duration = audio.duration;

        if (duration) {
            const seekTime = (clickX / width) * duration;
            audio.currentTime = seekTime;
        }
    }

    function updateProgress() {
        if (audio.duration) {
            const progress = (audio.currentTime / audio.duration) * 100;
            progressBar.style.width = progress + '%';

            const currentMin = Math.floor(audio.currentTime / 60);
            const currentSec = Math.floor(audio.currentTime % 60);
            const durationMin = Math.floor(audio.duration / 60);
            const durationSec = Math.floor(audio.duration % 60);

            progressTime.textContent =
                String(currentMin).padStart(2, '0') + ':' + String(currentSec).p                                                                                                                                                             adStart(2, '0') +
                ' / ' +
                String(durationMin).padStart(2, '0') + ':' + String(durationSec)                                                                                                                                                             .padStart(2, '0');
        }
    }

    function togglePlayer() {
        const player = document.getElementById('audioPlayer');
        isPlayerMinimized = !isPlayerMinimized;

        if (isPlayerMinimized) {
            player.classList.add('minimized');
        } else {
            player.classList.remove('minimized');
        }
    }

    // Audio event listeners
    audio.addEventListener('timeupdate', updateProgress);
    audio.removeEventListener('ended', nextTrack);
    audio.addEventListener('ended', nextTrack);

    audio.addEventListener('loadedmetadata', updateProgress);

    // 오디오 재생 성공 시
    audio.addEventListener('play', () => {
        playBtn.textContent = '⏸';
        isPlaying = true;
    });

    // 오디오 일시정지 시
    audio.addEventListener('pause', () => {
        playBtn.textContent = '▶';
        isPlaying = false;
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', function (e) {
        if (e.target.tagName.toLowerCase() !== 'input' && e.target.tagName.toLow                                                                                                                                                             erCase() !== 'textarea') {
            switch (e.key) {
                case ' ':
                    e.preventDefault();
                    togglePlay();
                    break;
                case 'ArrowLeft':
                    audio.currentTime = Math.max(0, audio.currentTime - 10);
                    break;
                case 'ArrowRight':
                    audio.currentTime = Math.min(audio.duration, audio.currentTi                                                                                                                                                             me + 10);
                    break;
            }
        }
    });

    // Guestbook Functions
    let guestbookEntries = [];
    let unlockedEntries = {}; // Store unlocked entry IDs
    let currentPage = 0;
    let totalPages = 0;
    let pageSize = 10;
    let totalCount = 0;

    // Load guestbook entries on page load
    window.addEventListener('load', () => {
        loadGuestbook(0);
    });

    async function loadGuestbook(page = 0, size = 10) {
        try {
            const response = await fetch(`https://dongmin.monster/api/guestbook?                                                                                                                                                             page=${page}&size=${size}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            if (response.ok) {
                const data = await response.json();
                guestbookEntries = data.entries || [];
                currentPage = data.currentPage || 0;
                totalPages = data.totalPages || 0;
                totalCount = data.totalCount || 0;
                pageSize = data.pageSize || 10;

                displayGuestbook();
                displayPagination();
            } else {
                document.getElementById('guestbookList').innerHTML =
                    '<div class="guestbook-empty">😅 방명록 서버가 잠시 점검중입                                                                                                                                                             니다!<br>조금 후에 다시 시도해주세요.</div>';
                document.getElementById('guestbookPagination').style.display = '                                                                                                                                                             none';
            }
        } catch (error) {
            console.error('방명록 로드 오류:', error);
            document.getElementById('guestbookList').innerHTML =
                '<div class="guestbook-empty">🔌 네트워크 연결을 확인해주세요!<b                                                                                                                                                             r>방명록을 불러올 수 없습니다.</div>';
            document.getElementById('guestbookPagination').style.display = 'none                                                                                                                                                             ';
        }
    }

    function displayGuestbook() {
        const listContainer = document.getElementById('guestbookList');

        if (guestbookEntries.length === 0) {
            listContainer.innerHTML = '<div class="guestbook-empty">아직 작성된                                                                                                                                                              방명록이 없습니다. 첫 번째 방명록을 남겨주세요!</div>';
            return;
        }

        listContainer.innerHTML = '';
        guestbookEntries.forEach((entry, index) => {
            const entryDiv = document.createElement('div');
            entryDiv.className = 'guestbook-entry';

            // Check if entry is locked and not yet unlocked
            const isLocked = entry.isPrivate && !unlockedEntries[entry.id];

            if (isLocked) {
                const authorName = entry.name || '익명';
                entryDiv.innerHTML = `
                    <div class="guestbook-entry-header">
                        <span class="guestbook-title">🔒 ${escapeHtml(entry.titl                                                                                                                                                             e)}</span>
                        <span class="guestbook-date">${formatDate(entry.createdA                                                                                                                                                             t)}</span>
                    </div>
                    <div style="font-size: 12px; color: #666; margin-bottom: 8px                                                                                                                                                             ;">작성자: ${escapeHtml(authorName)}</div>
                    <div class="guestbook-locked">
                        <span class="guestbook-lock-icon">🔐</span>
                        <p>이 글은 비밀번호로 보호되어 있습니다.</p>
                        <div class="guestbook-password-form">
                            <input type="password" class="input-field"
                                   id="unlock-${entry.id}"
                                   placeholder="비밀번호 입력"
                                   onkeypress="if(event.key==='Enter') unlockEnt                                                                                                                                                             ry('${entry.id}')">
                            <button class="btn guestbook-unlock-btn"
                                    onclick="unlockEntry('${entry.id}')">🔓 열기                                                                                                                                                             </button>
                        </div>
                    </div>
                `;
            } else {
                const authorName = entry.name || '익명';
                entryDiv.innerHTML = `
                    <div class="guestbook-entry-header">
                        <span class="guestbook-title">${entry.isPrivate ? '🔓 '                                                                                                                                                              : ''}${escapeHtml(entry.title)}</span>
                        <span class="guestbook-date">${formatDate(entry.createdA                                                                                                                                                             t)}</span>
                    </div>
                    <div style="font-size: 12px; color: #666; margin-bottom: 8px                                                                                                                                                             ;">작성자: ${escapeHtml(authorName)}</div>
                    <div class="guestbook-content">${escapeHtml(entry.content ||                                                                                                                                                              unlockedEntries[entry.id])}</div>
                `;
            }

            listContainer.appendChild(entryDiv);
        });
    }

    async function unlockEntry(entryId) {
        const passwordInput = document.getElementById(`unlock-${entryId}`);
        const password = passwordInput.value;

        if (!password) {
            alert('비밀번호를 입력해주세요!');
            return;
        }

        try {
            const response = await fetch(`https://dongmin.monster/api/guestbook/                                                                                                                                                             ${entryId}/unlock`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({password: password})
            });

            if (response.ok) {
                const data = await response.json();
                unlockedEntries[entryId] = data.content;

                // Update the specific entry in the array
                const entry = guestbookEntries.find(e => e.id === entryId);
                if (entry) {
                    entry.content = data.content;
                }

                displayGuestbook();
            } else {
                alert('비밀번호가 틀렸습니다.');
                passwordInput.value = '';
            }
        } catch (error) {
            console.error('비밀번호 확인 오류:', error);
            alert('서버 연결 오류가 발생했습니다.');
        }
    }

    async function submitGuestbook() {
        const name = document.getElementById('guestbookName').value.trim();
        const title = document.getElementById('guestbookTitle').value.trim();
        const content = document.getElementById('guestbookContent').value.trim()                                                                                                                                                             ;
        const password = document.getElementById('guestbookPassword').value;

        if (!name || !title || !content) {
            alert('이름, 제목, 내용을 모두 입력해주세요!');
            return;
        }

        // Rate limiting check
        const rateLimitResult = checkRateLimit();
        if (!rateLimitResult.allowed) {
            alert(rateLimitResult.message);
            return;
        }

        // Input validation and sanitization
        const validationResult = validateGuestbookInput(name, title, content, pa                                                                                                                                                             ssword);
        if (!validationResult.isValid) {
            alert(validationResult.message);
            return;
        }

        try {
            const response = await fetch('https://dongmin.monster/api/guestbook'                                                                                                                                                             , {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    name: name,
                    title: title,
                    content: content,
                    password: password,
                    isPrivate: password ? true : false
                })
            });

            if (response.ok) {
                alert('방명록이 작성되었습니다!');
                clearGuestbookForm();
                loadGuestbook(0); // Reload the guestbook from first page
            } else {
                const error = await response.json();
                alert('방명록 작성 실패: ' + (error.message || '알 수 없는 오류'                                                                                                                                                             ));
            }
        } catch (error) {
            console.error('방명록 작성 오류:', error);
            alert('서버 연결 오류가 발생했습니다.');
        }
    }

    function clearGuestbookForm() {
        document.getElementById('guestbookName').value = '';
        document.getElementById('guestbookTitle').value = '';
        document.getElementById('guestbookContent').value = '';
        document.getElementById('guestbookPassword').value = '';
    }

    function escapeHtml(text) {
        const map = {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#039;'
        };
        return text.replace(/[&<>"']/g, m => map[m]);
    }

    function formatDate(dateString) {
        const date = new Date(dateString);
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        const hours = String(date.getHours()).padStart(2, '0');
        const minutes = String(date.getMinutes()).padStart(2, '0');
        return `${year}.${month}.${day} ${hours}:${minutes}`;
    }

    // Security functions
    function validateGuestbookInput(name, title, content, password) {
        // Length validation
        if (name.length > 50) {
            return {isValid: false, message: '이름은 50자 이하로 입력해주세요.'}                                                                                                                                                             ;
        }
        if (title.length > 100) {
            return {isValid: false, message: '제목은 100자 이하로 입력해주세요.'                                                                                                                                                             };
        }
        if (content.length > 1000) {
            return {isValid: false, message: '내용은 1000자 이하로 입력해주세요.                                                                                                                                                             '};
        }
        if (password && password.length > 100) {
            return {isValid: false, message: '비밀번호는 100자 이하로 입력해주세                                                                                                                                                             요.'};
        }

        // Check for dangerous patterns instead of restricting characters
        const allText = `${name} ${title} ${content}`;
        const dangerousPattern = /<script|<\/script|javascript:|<iframe|<object|                                                                                                                                                             <embed|<link|<meta|<style|<form|onload=|onerror=|onclick=/i;

        if (dangerousPattern.test(allText)) {
            return {isValid: false, message: '보안상 허용되지 않는 내용이 포함되                                                                                                                                                             어 있습니다.'};
        }

        // Malicious pattern detection
        const maliciousPatterns = [
            /<script/i,
            /<\/script>/i,
            /javascript:/i,
            /onclick=/i,
            /onerror=/i,
            /onload=/i,
            /eval\(/i,
            /alert\(/i,
            /document\./i,
            /window\./i,
            /<iframe/i,
            /<object/i,
            /<embed/i,
            /vbscript:/i,
            /data:text\/html/i,
            /^\s*\{/,  // JSON-like patterns
            /^\s*\[/,  // Array-like patterns
            /union.*select/i,
            /select.*from/i,
            /drop.*table/i,
            /delete.*from/i,
            /insert.*into/i,
            /update.*set/i,
            /exec\(/i,
            /system\(/i
        ];

        for (const pattern of maliciousPatterns) {
            if (pattern.test(allText)) {
                return {isValid: false, message: '보안상 허용되지 않는 내용이 포                                                                                                                                                             함되어 있습니다.'};
            }
        }

        // URL/Link spam detection
        const urlPattern = /(https?:\/\/|www\.|[a-zA-Z0-9-]+\.[a-zA-Z]{2,})/gi;
        const urlMatches = allText.match(urlPattern);
        if (urlMatches && urlMatches.length > 2) {
            return {isValid: false, message: '링크는 최대 2개까지만 포함할 수 있                                                                                                                                                             습니다.'};
        }

        // Repeated character spam detection
        if (/(.)\1{9,}/.test(allText)) {
            return {isValid: false, message: '같은 문자를 10번 이상 연속으로 사                                                                                                                                                             용할 수 없습니다.'};
        }

        // Excessive special character detection
        const specialCharCount = (allText.match(/[!@#$%^&*()_+\-=\[\]{}|;':"<>?/                                                                                                                                                             .,~`]/g) || []).length;
        const totalLength = allText.length;
        if (totalLength > 0 && (specialCharCount / totalLength) > 0.3) {
            return {isValid: false, message: '특수문자가 너무 많이 포함되어 있습                                                                                                                                                             니다.'};
        }

        return {isValid: true, message: ''};
    }

    // Rate limiting
    let lastSubmissionTime = 0;
    const SUBMISSION_COOLDOWN = 30000; // 30 seconds

    function checkRateLimit() {
        const now = Date.now();
        if (now - lastSubmissionTime < SUBMISSION_COOLDOWN) {
            const remainingTime = Math.ceil((SUBMISSION_COOLDOWN - (now - lastSu                                                                                                                                                             bmissionTime)) / 1000);
            return {allowed: false, message: `도배 방지를 위해 ${remainingTime}                                                                                                                                                             초 후에 다시 시도해주세요.`};
        }
        lastSubmissionTime = now;
        return {allowed: true, message: ''};
    }

    function displayPagination() {
        const paginationContainer = document.getElementById('guestbookPagination                                                                                                                                                             ');

        if (totalPages <= 1) {
            paginationContainer.style.display = 'none';
            return;
        }

        paginationContainer.style.display = 'flex';
        paginationContainer.innerHTML = '';

        // Previous button
        const prevBtn = document.createElement('button');
        prevBtn.className = 'pagination-btn';
        prevBtn.innerHTML = '◀';
        prevBtn.disabled = currentPage === 0;
        prevBtn.onclick = () => {
            if (currentPage > 0) {
                loadGuestbook(currentPage - 1, pageSize);
            }
        };
        paginationContainer.appendChild(prevBtn);

        // Page info
        const pageInfo = document.createElement('div');
        pageInfo.className = 'pagination-info';
        const startEntry = currentPage * pageSize + 1;
        const endEntry = Math.min(startEntry + guestbookEntries.length - 1, tota                                                                                                                                                             lCount);
        pageInfo.textContent = `${startEntry}-${endEntry} / ${totalCount}`;
        paginationContainer.appendChild(pageInfo);

        // Page numbers (show max 5 pages around current)
        const maxVisiblePages = 5;
        let startPage = Math.max(0, currentPage - Math.floor(maxVisiblePages / 2                                                                                                                                                             ));
        let endPage = Math.min(totalPages - 1, startPage + maxVisiblePages - 1);

        // Adjust startPage if we're near the end
        if (endPage - startPage < maxVisiblePages - 1) {
            startPage = Math.max(0, endPage - maxVisiblePages + 1);
        }

        // First page and ellipsis if needed
        if (startPage > 0) {
            const firstPageBtn = document.createElement('button');
            firstPageBtn.className = 'pagination-btn';
            firstPageBtn.textContent = '1';
            firstPageBtn.onclick = () => loadGuestbook(0, pageSize);
            paginationContainer.appendChild(firstPageBtn);

            if (startPage > 1) {
                const ellipsis = document.createElement('span');
                ellipsis.className = 'pagination-info';
                ellipsis.textContent = '...';
                paginationContainer.appendChild(ellipsis);
            }
        }

        // Page number buttons
        for (let i = startPage; i <= endPage; i++) {
            const pageBtn = document.createElement('button');
            pageBtn.className = `pagination-btn ${i === currentPage ? 'current'                                                                                                                                                              : ''}`;
            pageBtn.textContent = (i + 1).toString();
            pageBtn.onclick = () => loadGuestbook(i, pageSize);
            paginationContainer.appendChild(pageBtn);
        }

        // Last page and ellipsis if needed
        if (endPage < totalPages - 1) {
            if (endPage < totalPages - 2) {
                const ellipsis = document.createElement('span');
                ellipsis.className = 'pagination-info';
                ellipsis.textContent = '...';
                paginationContainer.appendChild(ellipsis);
            }

            const lastPageBtn = document.createElement('button');
            lastPageBtn.className = 'pagination-btn';
            lastPageBtn.textContent = totalPages.toString();
            lastPageBtn.onclick = () => loadGuestbook(totalPages - 1, pageSize);
            paginationContainer.appendChild(lastPageBtn);
        }

        // Next button
        const nextBtn = document.createElement('button');
        nextBtn.className = 'pagination-btn';
        nextBtn.innerHTML = '▶';
        nextBtn.disabled = currentPage >= totalPages - 1;
        nextBtn.onclick = () => {
            if (currentPage < totalPages - 1) {
                loadGuestbook(currentPage + 1, pageSize);
            }
        };
        paginationContainer.appendChild(nextBtn);
    }

    // Enable dragging of the window
    (function () {
        const winEl = document.querySelector('.window');
        const handle = winEl.querySelector('.title-bar');
        let isDragging = false;
        let startX, startY;

        handle.addEventListener('mousedown', function (e) {
            e.preventDefault();
            // Freeze current transform and switch to pixel-based positioning
            const rect = winEl.getBoundingClientRect();
            winEl.style.left = rect.left + 'px';
            winEl.style.top = rect.top + 'px';
            winEl.style.transform = 'none';
            // Begin dragging
            isDragging = true;
            startX = e.clientX - rect.left;
            startY = e.clientY - rect.top;
            document.body.style.userSelect = 'none';
        });

        document.addEventListener('mousemove', function (e) {
            if (!isDragging) return;
            winEl.style.left = (e.clientX - startX) + 'px';
            winEl.style.top = (e.clientY - startY) + 'px';
        });

        document.addEventListener('mouseup', function () {
            isDragging = false;
            document.body.style.userSelect = '';
        });
    })();
</script>
</body>
</html>
